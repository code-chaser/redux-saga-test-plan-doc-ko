
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Introduction Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="docs/getting-started.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Table of Contents</li>
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/getting-started.html">
            
                <a href="docs/getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/integration-testing/">
            
                <a href="docs/integration-testing/">
            
                    
                    Integration Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="docs/integration-testing/effect-creators.html">
            
                <a href="docs/integration-testing/effect-creators.html">
            
                    
                    Effect Creator Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="docs/integration-testing/dispatching.html">
            
                <a href="docs/integration-testing/dispatching.html">
            
                    
                    Dispatching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="docs/integration-testing/timeout.html">
            
                <a href="docs/integration-testing/timeout.html">
            
                    
                    Timeout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="docs/integration-testing/state.html">
            
                <a href="docs/integration-testing/state.html">
            
                    
                    State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="docs/integration-testing/mocking/">
            
                <a href="docs/integration-testing/mocking/">
            
                    
                    Mocking
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="docs/integration-testing/mocking/static-providers.html">
            
                <a href="docs/integration-testing/mocking/static-providers.html">
            
                    
                    Static Providers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="docs/integration-testing/mocking/dynamic-providers.html">
            
                <a href="docs/integration-testing/mocking/dynamic-providers.html">
            
                    
                    Dynamic Providers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="docs/integration-testing/partial-matching.html">
            
                <a href="docs/integration-testing/partial-matching.html">
            
                    
                    Partial Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="docs/integration-testing/negated-assertions.html">
            
                <a href="docs/integration-testing/negated-assertions.html">
            
                    
                    Negated Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="docs/integration-testing/exposed-effects.html">
            
                <a href="docs/integration-testing/exposed-effects.html">
            
                    
                    Exposed Effects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="docs/integration-testing/snapshot-testing.html">
            
                <a href="docs/integration-testing/snapshot-testing.html">
            
                    
                    Snapshot Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="docs/integration-testing/return-value.html">
            
                <a href="docs/integration-testing/return-value.html">
            
                    
                    Return Value
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="docs/integration-testing/thrown-errors.html">
            
                <a href="docs/integration-testing/thrown-errors.html">
            
                    
                    Thrown Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="docs/integration-testing/forked-sagas.html">
            
                <a href="docs/integration-testing/forked-sagas.html">
            
                    
                    Forked Sagas
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="docs/unit-testing/">
            
                <a href="docs/unit-testing/">
            
                    
                    Unit Testing
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="docs/unit-testing/error-messages.html">
            
                <a href="docs/unit-testing/error-messages.html">
            
                    
                    Error Messages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="docs/unit-testing/effect-creators.html">
            
                <a href="docs/unit-testing/effect-creators.html">
            
                    
                    Effect Creators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="docs/unit-testing/saga-helpers.html">
            
                <a href="docs/unit-testing/saga-helpers.html">
            
                    
                    Saga Helpers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="docs/unit-testing/general-assertions.html">
            
                <a href="docs/unit-testing/general-assertions.html">
            
                    
                    General Assertions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="docs/unit-testing/time-travel.html">
            
                <a href="docs/unit-testing/time-travel.html">
            
                    
                    Time Travel
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="redux-saga-test-plan">Redux Saga Test Plan</h1>
<p><a href="https://www.npmjs.com/package/redux-saga-test-plan" target="_blank"><img src="https://img.shields.io/npm/v/redux-saga-test-plan.svg?style=flat-square" alt="npm"></a>
<a href="https://travis-ci.org/jfairbank/redux-saga-test-plan" target="_blank"><img src="https://img.shields.io/travis/jfairbank/redux-saga-test-plan/master.svg?style=flat-square" alt="Travis branch"></a>
<a href="https://codecov.io/gh/jfairbank/redux-saga-test-plan" target="_blank"><img src="https://img.shields.io/codecov/c/github/jfairbank/redux-saga-test-plan.svg?style=flat-square" alt="Codecov"></a></p>
<h4 id="&#xC27D;&#xAC8C;-redux-saga-&#xB97C;-&#xD14C;&#xC2A4;&#xD2B8;&#xD558;&#xC138;&#xC694;">&#xC27D;&#xAC8C; Redux Saga &#xB97C; &#xD14C;&#xC2A4;&#xD2B8;&#xD558;&#xC138;&#xC694;.</h4>
<p>Redux Saga Test Plan&#xC740; saga &#xD14C;&#xC2A4;&#xD2B8;&#xB97C; &#xC27D;&#xAC8C; &#xB9CC;&#xB4ED;&#xB2C8;&#xB2E4;. effect&#xB4E4;&#xC758; &#xAC80;&#xC99D;&#xACFC; &#xC21C;&#xC11C;&#xB97C; &#xD14C;&#xC2A4;&#xD2B8; &#xD574;&#xC57C; &#xD558;&#xAC70;&#xB098;
&#xD2B9;&#xC815; &#xC2DC;&#xC810;&#xC5D0; saga <code>put</code>&#xC758; &#xD2B9;&#xC815; &#xC561;&#xC158;&#xC744; &#xD14C;&#xC2A4;&#xD2B8; &#xD574;&#xC57C; &#xD560;&#xB54C; Redux Saga Test Plan&#xB97C; &#xC801;&#xC6A9;&#xD558;&#xC138;&#xC694;.
<!-- Redux Saga Test Plan makes testing sagas a breeze. Whether you need to test
exact effects and their ordering or just test your saga `put`'s a specific
action at some point, Redux Saga Test Plan has you covered. --></p>
<p>Redux Saga Test Plan&#xB294; saga&#xB97C; &#xC27D;&#xAC8C; &#xD14C;&#xC2A4;&#xD2B8; &#xD560; &#xC218; &#xC788;&#xAC8C; &#xB2E8;&#xC704; &#xD14C;&#xC2A4;&#xD2B8;&#xC640; &#xD1B5;&#xD569; &#xD14C;&#xC2A4;&#xD2B8; &#xBC29;&#xBC95;&#xC5D0; &#xB300;&#xD574; &#xBAA8;&#xB450; 
&#xD3EC;&#xC6A9;&#xD558;&#xB294; &#xAC83;&#xC744; &#xBAA9;&#xD45C;&#xB85C; &#xD569;&#xB2C8;&#xB2E4;.
<!-- Redux Saga Test Plan aims to embrace both unit testing and integration testing
approaches to make testing your sagas easy. --></p>
<h2 id="&#xD1B5;&#xD569;-&#xD14C;&#xC2A4;&#xD2B8;">&#xD1B5;&#xD569; &#xD14C;&#xC2A4;&#xD2B8;</h2>
<p><strong>&#xAE00;&#xB85C;&#xBC8C; <code>Promise</code>&#xAC00; &#xD544;&#xC694;&#xD569;&#xB2C8;&#xB2E4;.</strong></p>
<p>saga &#xB2E8;&#xC704; &#xD14C;&#xC2A4;&#xD2B8;&#xC758; &#xB2E8;&#xC810;&#xC740; &#xD14C;&#xC2A4;&#xD2B8;&#xAC00; &#xAD6C;&#xD604;&#xACFC; &#xACB0;&#xD569;&#xD55C;&#xB2E4;&#xB294; &#xAC83;&#xC785;&#xB2C8;&#xB2E4;. &#xB2E8;&#xC21C;&#xD788; saga&#xC5D0;&#xC11C; &#xBC18;&#xD658;&#xB418;&#xB294; effect&#xB4E4;&#xC758; &#xC21C;&#xC11C;&#xB97C; 
&#xBCC0;&#xACBD;&#xD558;&#xB294;&#xAC83; &#xB9CC;&#xC73C;&#xB85C;&#xB3C4; &#xD14C;&#xC2A4;&#xD2B8;&#xAC00; &#xAE68;&#xC9D1;&#xB2C8;&#xB2E4;. &#xC2EC;&#xC9C0;&#xC5B4; saga&#xC640; &#xD14C;&#xC2A4;&#xD2B8;&#xAC00; &#xAE30;&#xB2A5;&#xC801;&#xC73C;&#xB85C; &#xB3D9;&#xC77C;&#xD558;&#xB354;&#xB77C;&#xB3C4; &#xADF8;&#xB807;&#xC2B5;&#xB2C8;&#xB2E4;. 
saga&#xC5D0;&#xC11C; &#xBC18;&#xD658;&#xB418;&#xB294; effect&#xC758; &#xAC80;&#xC99D;&#xC774;&#xB098; &#xC21C;&#xC11C;&#xC5D0; &#xAD00;&#xC2EC;&#xC774; &#xC5C6;&#xB2E4;&#xBA74;, Redux Saga&#xAC00; &#xC2E4;&#xD57C;&#xB420; &#xB54C; saga&#xC758; &#xB3D9;&#xC791;&#xC744; 
&#xD1B5;&#xD569;&#xC801;&#xC73C;&#xB85C; &#xC811;&#xADFC;&#xD574;&#xC11C; &#xD14C;&#xC2A4;&#xD2B8;&#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;. saga&#xAC00; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xB3D9;&#xC548; &#xBC18;&#xD658;&#xB418;&#xB294; &#xC77C;&#xBD80; effect&#xC5D0; &#xB300;&#xD574; &#xAC04;&#xB2E8;&#xD55C; &#xD14C;&#xC2A4;&#xD2B8; &#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC774;&#xB97C; &#xC704;&#xD574; <code>expectSaga</code> &#xD14C;&#xC2A4;&#xD2B8; &#xD568;&#xC218;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xC138;&#xC694;.
<!-- One downside to unit testing sagas is that it couples your test to your
implementation. Simple reordering of yielded effects in your saga could break
your tests even if the functionality stays the same. If you're not concerned
with the order or exact effects your saga yields, then you can take a
integrative approach, testing the behavior of your saga when run by Redux Saga.
Then, you can simply test that a particular effect was yielded during the saga
run. For this, use the `expectSaga` test function. --></p>
<h3 id="&#xAC04;&#xB2E8;&#xD55C;-&#xC608;">&#xAC04;&#xB2E8;&#xD55C; &#xC608;</h3>
<p>Import the <code>expectSaga</code> function and pass in your saga function as an argument.
Any additional arguments to <code>expectSaga</code> will become arguments to the saga
function. The return value is a chainable API with assertions for the different
effect creators available in Redux Saga.</p>
<p>In the example below, we test that the <code>userSaga</code> successfully <code>put</code>s a
<code>RECEIVE_USER</code> action with the <code>fakeUser</code> as the payload. We call <code>expectSaga</code>
with the <code>userSaga</code> and supply an <code>api</code> object as an argument to <code>userSaga</code>. We
assert the expected <code>put</code> effect via the <code>put</code> assertion method. Then, we call
the <code>dispatch</code> method with a <code>REQUEST_USER</code> action that contains the user id
payload. The <code>dispatch</code> method will supply actions to <code>take</code> effects. Finally,
we start the test by calling the <code>run</code> method which returns a <code>Promise</code>. Tests
with <code>expectSaga</code> will always run asynchronously, so the returned <code>Promise</code>
resolves when the saga finishes or when <code>expectSaga</code> forces a timeout. If you&apos;re
using a test runner like Jest, you can return the <code>Promise</code> inside your Jest
test so Jest knows when the test is complete.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { call, put, take } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga/effects&apos;</span>;
<span class="hljs-keyword">import</span> { expectSaga } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">userSaga</span>(<span class="hljs-params">api</span>) </span>{
  <span class="hljs-keyword">const</span> action = <span class="hljs-keyword">yield</span> take(<span class="hljs-string">&apos;REQUEST_USER&apos;</span>);
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">yield</span> call(api.fetchUser, action.payload);

  <span class="hljs-keyword">yield</span> put({ type: <span class="hljs-string">&apos;RECEIVE_USER&apos;</span>, payload: user });
}

it(<span class="hljs-string">&apos;just works!&apos;</span>, () =&gt; {
  <span class="hljs-keyword">const</span> api = {
    fetchUser: id =&gt; ({ id, name: <span class="hljs-string">&apos;Tucker&apos;</span> }),
  };

  <span class="hljs-keyword">return</span> expectSaga(userSaga, api)
    <span class="hljs-comment">// Assert that the `put` will eventually happen.</span>
    .put({
      type: <span class="hljs-string">&apos;RECEIVE_USER&apos;</span>,
      payload: { id: <span class="hljs-number">42</span>, name: <span class="hljs-string">&apos;Tucker&apos;</span> },
    })

    <span class="hljs-comment">// Dispatch any actions that the saga will `take`.</span>
    .dispatch({ type: <span class="hljs-string">&apos;REQUEST_USER&apos;</span>, payload: <span class="hljs-number">42</span> })

    <span class="hljs-comment">// Start the test. Returns a Promise.</span>
    .run();
});
</code></pre>
<h3 id="mocking-with-providers">Mocking with Providers</h3>
<p><code>expectSaga</code> runs your saga with Redux Saga, so it will try to resolve effects
just like Redux Saga would in your application. This is great for integration
testing, but sometimes it can be laborious to bootstrap your entire application
for tests or mock things like server APIs. In those cases, you can use
<em>providers</em> which are perfect for mocking values directly with <code>expectSaga</code>.
Providers are similar to middleware that allow you to intercept effects before
they reach Redux Saga. You can choose to return a mock value instead of allowing
Redux Saga to handle the effect, or you can pass on the effect to other
providers or eventually Redux Saga.</p>
<p><code>expectSaga</code> has two flavors of providers, <em>static providers</em> and <em>dynamic
providers</em>. Static providers are easier to compose and reuse, but dynamic
providers give you more flexibility with non-deterministic effects. Here is one
example below using static providers. There are more examples of providers <a href="http://redux-saga-test-plan.jeremyfairbank.com/integration-testing/mocking/" target="_blank">in
the
docs</a>.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { call, put, take } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga/effects&apos;</span>;
<span class="hljs-keyword">import</span> { expectSaga } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> matchers <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan/matchers&apos;</span>;
<span class="hljs-keyword">import</span> { throwError } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan/providers&apos;</span>;
<span class="hljs-keyword">import</span> api <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;my-api&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">userSaga</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> action = <span class="hljs-keyword">yield</span> take(<span class="hljs-string">&apos;REQUEST_USER&apos;</span>);
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">yield</span> call(api.fetchUser, action.payload);
    <span class="hljs-keyword">const</span> pet = <span class="hljs-keyword">yield</span> call(api.fetchPet, user.petId);

    <span class="hljs-keyword">yield</span> put({
      type: <span class="hljs-string">&apos;RECEIVE_USER&apos;</span>,
      payload: { user, pet },
    });
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-keyword">yield</span> put({ type: <span class="hljs-string">&apos;FAIL_USER&apos;</span>, error: e });
  }
}

it(<span class="hljs-string">&apos;fetches the user&apos;</span>, () =&gt; {
  <span class="hljs-keyword">const</span> fakeUser = { name: <span class="hljs-string">&apos;Jeremy&apos;</span>, petId: <span class="hljs-number">20</span> };
  <span class="hljs-keyword">const</span> fakeDog = { name: <span class="hljs-string">&apos;Tucker&apos;</span> };

  <span class="hljs-keyword">return</span> expectSaga(userSaga, api)
    .provide([
      [call(api.fetchUser, <span class="hljs-number">42</span>), fakeUser],
      [matchers.call.fn(api.fetchPet), fakeDog],
    ])
    .put({
      type: <span class="hljs-string">&apos;RECEIVE_USER&apos;</span>,
      payload: { user: fakeUser, pet: fakeDog },
    })
    .dispatch({ type: <span class="hljs-string">&apos;REQUEST_USER&apos;</span>, payload: <span class="hljs-number">42</span> })
    .run();
});

it(<span class="hljs-string">&apos;handles errors&apos;</span>, () =&gt; {
  <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;error&apos;</span>);

  <span class="hljs-keyword">return</span> expectSaga(userSaga, api)
    .provide([
      [matchers.call.fn(api.fetchUser), throwError(error)],
    ])
    .put({ type: <span class="hljs-string">&apos;FAIL_USER&apos;</span>, error })
    .dispatch({ type: <span class="hljs-string">&apos;REQUEST_USER&apos;</span>, payload: <span class="hljs-number">42</span> })
    .run();
});
</code></pre>
<p>Notice we pass in an array of tuple pairs (or array pairs) that contain a
matcher and a fake value. You can use the effect creators from Redux Saga or
matchers from the <code>redux-saga-test-plan/matchers</code> module to match effects. The
bonus of using Redux Saga Test Plan&apos;s matchers is that they offer special
partial matchers like <code>call.fn</code> which matches by the function without worrying
about the specific <code>args</code> contained in the actual <code>call</code> effect. Notice in the
second test that we can also simulate errors with the <code>throwError</code> function from
the <code>redux-saga-test-plan/providers</code> module. This is perfect for simulating
server problems.</p>
<h3 id="example-with-reducer">Example with Reducer</h3>
<p>One good use case for integration testing is testing your reducer too. You can
hook up your reducer to your test by calling the <code>withReducer</code> method with your
reducer function.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { call, select, take } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga/effects&apos;</span>;
<span class="hljs-keyword">import</span> { expectSaga } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-keyword">const</span> HAVE_BIRTHDAY = <span class="hljs-string">&apos;HAVE_BIRTHDAY&apos;</span>;
<span class="hljs-keyword">const</span> UPDATE_DOG = <span class="hljs-string">&apos;UPDATE_DOG&apos;</span>;

<span class="hljs-keyword">const</span> initialState = {
  dog: {
    name: <span class="hljs-string">&apos;Tucker&apos;</span>,
    age: <span class="hljs-number">11</span>,
  },
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">state = initialState, action</span>) </span>{
  <span class="hljs-keyword">if</span> (action.type === HAVE_BIRTHDAY) {
    <span class="hljs-keyword">return</span> {
      ...state,
      dog: {
        ...state.dog,
        age: state.dog.age + <span class="hljs-number">1</span>,
      },
    };
  }

  <span class="hljs-keyword">return</span> state;
}

<span class="hljs-keyword">const</span> getDog = state =&gt; state.dog;

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">saga</span>(<span class="hljs-params">api</span>) </span>{
  <span class="hljs-keyword">yield</span> take(UPDATE_DOG);
  <span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">yield</span> select(getDog);
  <span class="hljs-keyword">yield</span> call(api.updateDog, dog);
}

it(<span class="hljs-string">&apos;handles reducers&apos;</span>, () =&gt; {
  <span class="hljs-keyword">const</span> api = { updateDog() {} };

  <span class="hljs-keyword">return</span> expectSaga(saga, api)
    .withReducer(reducer)

    .call(api.updateDog, {
      name: <span class="hljs-string">&apos;Tucker&apos;</span>,
      age: <span class="hljs-number">12</span>,
    })

    .dispatch({ type: HAVE_BIRTHDAY })
    .dispatch({ type: UPDATE_DOG })

    .run();
});
</code></pre>
<h2 id="unit-testing">Unit Testing</h2>
<p>If you want to ensure that your saga yields specific types of effects in a
particular order, then you&apos;ll want to use the <code>testSaga</code> function. Here&apos;s a
simple example:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { testSaga } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-saga-test-plan&apos;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identity</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> value;
}

<span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">mainSaga</span>(<span class="hljs-params">x, y</span>) </span>{
  <span class="hljs-keyword">const</span> action = <span class="hljs-keyword">yield</span> take(<span class="hljs-string">&apos;HELLO&apos;</span>);

  <span class="hljs-keyword">yield</span> put({ type: <span class="hljs-string">&apos;ADD&apos;</span>, payload: x + y });
  <span class="hljs-keyword">yield</span> call(identity, action);
}

<span class="hljs-keyword">const</span> action = { type: <span class="hljs-string">&apos;TEST&apos;</span> };

it(<span class="hljs-string">&apos;works with unit tests&apos;</span>, () =&gt; {
  testSaga(mainSaga, <span class="hljs-number">40</span>, <span class="hljs-number">2</span>);
    <span class="hljs-comment">// advance saga with `next()`</span>
    .next()

    <span class="hljs-comment">// assert that the saga yields `take` with `&apos;HELLO&apos;` as type</span>
    .take(<span class="hljs-string">&apos;HELLO&apos;</span>)

    <span class="hljs-comment">// pass back in a value to a saga after it yields</span>
    .next(action)

    <span class="hljs-comment">// assert that the saga yields `put` with the expected action</span>
    .put({ type: <span class="hljs-string">&apos;ADD&apos;</span>, payload: <span class="hljs-number">42</span> })

    .next()

    <span class="hljs-comment">// assert that the saga yields a `call` to `identity` with</span>
    <span class="hljs-comment">// the `action` argument</span>
    .call(identity, action)

    .next()

    <span class="hljs-comment">// assert that the saga is finished</span>
    .isDone();
});
</code></pre>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="./">Introduction</a></li>
<li><a href="docs/getting-started.html">Getting Started</a></li>
<li><a href="docs/integration-testing/">Integration Testing</a><ul>
<li><a href="docs/integration-testing/effect-creators.html">Effect Creator Assertions</a></li>
<li><a href="docs/integration-testing/dispatching.html">Dispatching</a></li>
<li><a href="docs/integration-testing/timeout.html">Timeout</a></li>
<li><a href="docs/integration-testing/state.html">State</a></li>
<li><a href="docs/integration-testing/mocking/">Mocking</a><ul>
<li><a href="docs/integration-testing/mocking/static-providers.html">Static Providers</a></li>
<li><a href="docs/integration-testing/mocking/dynamic-providers.html">Dynamic Providers</a></li>
</ul>
</li>
<li><a href="docs/integration-testing/partial-matching.html">Partial Assertions</a></li>
<li><a href="docs/integration-testing/negated-assertions.html">Negated Assertions</a></li>
<li><a href="docs/integration-testing/exposed-effects.html">Exposed Effects</a></li>
<li><a href="docs/integration-testing/snapshot-testing.html">Snapshot Testing</a></li>
<li><a href="docs/integration-testing/return-value.html">Return Value</a></li>
<li><a href="docs/integration-testing/forked-sagas.html">Forked Sagas</a></li>
</ul>
</li>
<li><a href="docs/unit-testing/">Unit Testing</a><ul>
<li><a href="docs/unit-testing/error-messages.html">Error Messages</a></li>
<li><a href="docs/unit-testing/effect-creators.html">Effect Creators</a></li>
<li><a href="docs/unit-testing/saga-helpers.html">Saga Helpers</a></li>
<li><a href="docs/unit-testing/general-assertions.html">General Assertions</a></li>
<li><a href="docs/unit-testing/time-travel.html">Time Travel</a></li>
</ul>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="docs/getting-started.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Getting Started">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Getting Started","level":"1.2","depth":1,"path":"docs/getting-started.md","ref":"docs/getting-started.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"README.md","mtime":"2019-05-21T17:01:56.307Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-05-21T17:02:05.200Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

